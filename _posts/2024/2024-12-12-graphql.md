---
title: "GraphQLに入門した"
categories:
    - blog
tags:
    - graphql
toc: true
---

仕事でGraphQLを使うようになったので、入門した感想や学びをまとめます。
この記事は [GMOペパボ エンジニア Advent Calendar 2024](https://adventar.org/calendars/10317) の12日目です。

# GraphQLとの出会い

2024年9月に、EC事業部からSUZURI事業部へ異動しました。
SUZURIではGraphQLが採用されており、これまで聞いたことしかなかったGraphQLを初めて使うことになりました。
これまではRESTしか使っていなかったので、「こんな仕組みがあるのか…」という新鮮な驚きがありました。
実際に学び、触れていく中で、そのシンプルで無駄のない仕組みに惹かれていきました。
また、競技プログラミングなどでグラフ関連のアルゴリズムを学んでいた経験があったため、データをグラフとして扱う考え方も面白く感じたポイントでした。

# 学習方法とおすすめリソース

同僚におすすめされた[「初めてのGraphQL ―Webサービスを作って学ぶ新世代API」（O'Reilly Japan）](https://www.oreilly.co.jp/books/9784873118932/)が参考になりました。
背景・歴史（第一章）やグラフ理論（第二章）などから始まっていて、GraphQLの本質的な部分から理解を深めることができ、「なぜGraphQLなのか」という根本的な疑問に答えてくれる内容でした。

[GraphQL公式サイトのLearnセクション](https://graphql.org/learn/)もコンパクトにまとまっていて、とても参考になります。
インタラクティブに試せるサンプルも用意されているので、実際に触って感覚を掴みたい方におすすめです。
ベストプラクティスについてもまとめられています。

# GraphQLの良いところ

## RESTとの比較

RESTではリソースに注目したアプローチを取りますが、GraphQLはそこからさらに一歩進んで「本当に必要な情報を過不足なく取得する」ことを実現しています。この無駄の無さは、APIの効率性を考える上で大きな利点です。

## モデリングとの相性

リソースをグラフとして捉えるアプローチは、ActiveRecordでのモデルの関係性とも相性が良く、直感的なデータモデリングが可能です。

# 開発時の注意点

## N+1問題への対応

何も考えずに実装してしまうとN+1問題を埋め込みやすいので、DataLoaderの活用が重要です。

## アクセス制御の重要性

GraphQLでは、特にアクセスが制限されるリソースに対して適切な制限を適用することが重要です。認証・認可の実装は慎重に行う必要があります。

# 開発ツール

GraphiQLを導入してAPIをすぐに試せる環境を整えておくと、開発効率が大きく向上します。クエリの動作確認やスキーマの参照が容易になり、開発体験が改善されます。

# まとめ

GraphQLは「必要な情報を過不足なく取得する」という考え方を実現した、シンプルながら強力なアプローチです。適切に使いこなすことで、効率的なAPI開発が可能になります。

ただし、N+1問題やアクセス制御など、実装時に注意すべきポイントもあります。これらに適切に対応することで、GraphQLの利点を最大限に活かすことができます。