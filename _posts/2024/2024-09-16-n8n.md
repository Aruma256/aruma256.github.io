---
title: "n8n の self-hosting のすすめ"
categories:
    - blog
tags:
    - apps
toc: true
---

最近自宅サーバーに導入したワークフロー自動化ツール [n8n](https://n8n.io/) が便利だったので紹介します。

# n8n について

n8n はWebベースのGUIでワークフローを作成・運用できるツールです。  
本記事ではCommunity Editionのみを扱いますが、有料のクラウド版も提供されています。

下は実際の画面です。

![n8nの画面](/assets/2024/2024-09-16-n8n/n8n-about.webp)

この例では、スケジュールでHTTPリクエストを送信し、レスポンスによって固定のレスポンスの編集またはコード実行を行い、OpenAIへリクエストを投げ、最終的なレスポンスをDiscordに送信するワークフローを作成しています。

# n8n の楽しいところ

## ノードが豊富

以前はDifyのself-hosting版を使ってチャットボットなどを運用していましたが、スケジュール実行や（APIキー無しでの）Webhookの待ち受けなど、「そこまでできるならこれもできてくれー」と思うようになりました。
n8nでは様々なTriggerノードが用意されており、より幅広いシーンで利用できます。

また、HTTP RequestノードのPredefined Credential Typeも地味に便利なポイントです。
例えば組み込みのOpenAIノードでは非対応なオプションを利用したい場合、HTTP Requestノードで自力でREST APIを叩くことになりますが、サービスの認証はPredefined Credential Typeを選ぶだけで簡単に通せます。

入出力やAPI呼び出しの実装はn8nに任せ、自分のやりたい部分に集中できる/欲しい機能をサクッと実現できるのはとてもありがたいです。

## デバッグが容易

下はノード詳細の画面です。
![n8nのノード詳細画面](/assets/2024/2024-09-16-n8n/n8n-node-detail-for-debug.webp)

前のノードにデバッグ用の仮の出力
```json
[
  {
    "name": "First item",
    "code": 1
  },
  {
    "name": "Second item",
    "code": 2
  }
]
```
を指定したので、それが左側に（このノードへの入力として）表示されています。  
"Test step" をクリックすると、このノードのみが実行され、結果が右側に表示されます。  
この繰り返しでワークフローを作成・編集できます。

入出力の表示はJSONの他、SchemaやTable形式にも切り替えられます。

## その他

* フィールドの指定はドラッグ・アンド・ドロップで簡単、かつJSも埋め込める
* フローに落としにくい部分はコードで書いてよい（CodeノードでJSとPythonを記述可能）
